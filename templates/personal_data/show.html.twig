{% extends 'base.html.twig' %}

{% block title %}PersonalData{% endblock %}

{% block body %}
<div class="container-xxl">
    <h1>Страница персоанльных данных</h1>
    {% for label, messages in app.flashes(['success', 'notice']) %}
        {% for message in messages %}
            <div class="alert alert-success" role="alert">
                {{ message }}
            </div>
        {% endfor %}
    {% endfor %}
    {% for label, messages in app.flashes(['info', 'notice']) %}
        {% for message in messages %}
            <div class="alert alert-info" role="alert">
                {{ message }}
            </div>
        {% endfor %}
    {% endfor %}
    {% if personal_datum == NULL %}
    <div class="alert alert-warning" role="alert">
    Важная информация, вы еще не заполнили персональные данные:
        <ul>
            <li>Вы должны заполнить персональные данные и принять условия нашей платформы. Без этого вы не сможете совершать операции на нашей платформе. Спасибо за понимание! <code><a href="{{ path('app_personal_data_new', {'user_id': user.id}) }}">перейти к заполнению</a></code></li>
        </ul>
    </div>
    {% else %}  
    <table class="table">
        <tbody>
            {# <tr>
                <th>Id</th>
                <td>{{ personal_datum.id }}</td>
            </tr> #}
            <tr>
                <th>Name</th>
                <td>{{ personal_datum.name }}</td>
            </tr>
            <tr>
                <th>Surname</th>
                <td>{{ personal_datum.surname }}</td>
            </tr>
            <tr>
                <th>Phone</th>
                <td>{{ personal_datum.phone }}</td>
            </tr>
            <tr>
                <th>State</th>
                <td>{{ personal_datum.state }}</td>
            </tr>
            <tr>
                <th>Region</th>
                <td>{{ personal_datum.region }}</td>
            </tr>
            <tr>
                <th>City</th>
                <td>{{ personal_datum.city }}</td>
            </tr>
            <tr>
                <th>Индекс</th>
                <td>{{ personal_datum.indexcity }}</td>
            </tr>
            <tr>
                <th>Street</th>
                <td>{{ personal_datum.street }}</td>
            </tr>
            <tr>
                <th>House</th>
                <td>{{ personal_datum.house }}</td>
            </tr>
            <tr>
                <th>Frame</th>
                <td>{{ personal_datum.frame }}</td>
            </tr>
            <tr>
                <th>Apartment</th>
                <td>{{ personal_datum.apartment }}</td>
            </tr>
        </tbody>
    </table>
    {% if is_granted('ROLE_ADMIN') %}
    <a type="submit" class="btn btn-primary" href="{{ path('app_personal_data_index') }}">Назад</a>
    {% else %}
    <a type="submit" class="btn btn-primary" href="{{ path('app_personal_area') }}">Назад</a>
    {% endif %}
    <a type="submit" class="btn btn-warning" href="{{ path('app_personal_data_edit', {'id': personal_datum.id}) }}">Редактировать</a>
    <br><br>
     {% if is_granted('IS_AUTHENTICATED_FULLY') %}
        {% if is_granted('ROLE_ADMIN') %}
        {{ include('personal_data/_delete_form.html.twig') }}
        {% endif %}
    {% endif %}
{% endif %}
</div>
{% endblock %}
